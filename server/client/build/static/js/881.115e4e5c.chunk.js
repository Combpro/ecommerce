"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[881],{3881:function(e,t,r){r.r(t);var n=r(4165),s=r(5861),a=r(4942),i=r(1413),c=r(885),o=r(2791),l=r(7689),u=r(8014),d=r(8257),x=r(8820),m=r(8174),f=(r(5462),r(1405)),p=r(4643),h=r(184);t.default=function(){var e=(0,f.I0)(),t=(0,o.useState)({review:""}),r=(0,c.Z)(t,2),v=r[0],g=r[1],w=(0,o.useState)(!1),b=(0,c.Z)(w,2),j=b[0],y=b[1],N=(0,o.useState)(0),Z=(0,c.Z)(N,2),k=Z[0],S=Z[1],C=(0,o.useState)(void 0),O=(0,c.Z)(C,2),A=O[0],R=O[1],I=Array(5).fill(0),P=(0,o.useState)(),Y=(0,c.Z)(P,2),D=Y[0],H=Y[1],J=(0,l.UO)().id,M={position:"top-right",autoClose:1e4,pauseOnHover:!0,draggable:!1,theme:"dark"};(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/admin/getProduct/".concat(J));case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,H(r.product);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var T=function(){var e=v.review;return j&&e.length<3?(m.Am.error("Review should be of atleast 3 in length",M),!1):0!==k||(m.Am.error("Please! Give rating also"),!1)},W=function(){var t=(0,s.Z)((0,n.Z)().mark((function t(r,s){var a,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),!T()){t.next=18;break}return t.next=4,fetch("/admin/rating/".concat(s),{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify({rating:k})});case 4:return 200===(a=t.sent).status&&e((0,p.Y)()),t.next=8,a.json();case 8:if(t.sent,!j){t.next=16;break}return t.next=12,fetch("/admin/review/".concat(s),{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify({review:v.review})});case 12:return i=t.sent,t.next=15,i.json();case 15:t.sent;case 16:S(0),m.Am.success("Rating has been submited successfully");case 18:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),E=function(){R(void 0)};return(0,h.jsxs)("div",{className:"p-8 flex flex-col smm:p-4 justify-center w-[50vw] mx-auto mdm:w-full",children:[(0,h.jsxs)("div",{className:"review-heading flex flex-col justify-center items-center",children:[(0,h.jsx)("h1",{className:"text-royal-blue mdm:text-2xl md:text-4xl font-semibold",children:"Review"}),(0,h.jsx)("p",{className:"border-b-4 border-red-500 w-20 mx-auto mt-2"})]}),D?(0,h.jsxs)("div",{className:"product-detail mt-4 bg-gray-100 p-4 rounded-xl",children:[(0,h.jsxs)("div",{className:"product-desc flex flex-col justify-center py-2 px-3",children:[(0,h.jsxs)("div",{className:"product flex gap-4 items-center",children:[(0,h.jsx)("img",{className:"h-10 w-10 rounded-md",src:D.productImage,alt:"productImg"}),(0,h.jsx)("h1",{className:"text-2xl smm:text-lg",children:D.name})]}),(0,h.jsxs)("div",{className:"product-public flex items-center mt-2 text-gray-500 gap-2",children:[(0,h.jsx)("h3",{children:(0,h.jsx)(u.hKA,{})}),(0,h.jsx)("h3",{children:"Your review will be posted publicy on the web."})]})]}),(0,h.jsxs)("div",{className:"product-review p-3",children:[(0,h.jsx)("div",{className:"stars flex mb-4 text-3xl smm:text-sm",children:I.map((function(e,t){return(0,h.jsx)(x.pHD,{onClick:function(){S(t+1)},onMouseOver:function(){R(t+1)},onMouseLeave:E,className:(A||k)>t?"text-orange-500":"text-gray-500"},t)}))}),(0,h.jsx)("div",{children:(0,h.jsx)("textarea",{name:"review",id:"review",rows:"5",placeholder:"Write a Review",className:"w-full p-3 placeholder:text-lg border border-gray-300 rounded-lg focus:outline-none",onChange:function(e){y(!0),g((0,i.Z)((0,i.Z)({},v),{},(0,a.Z)({},e.target.id,e.target.value)))},value:v.review})}),(0,h.jsx)("button",{onClick:function(e){return W(e,D._id)},className:"bg-red-500 text-white px-4 py-2 mt-2 rounded-md mdm:text-sm text-lg border-2 hover:text-red-500 hover:bg-white border-red-500",children:"Submit Review"})]})]}):(0,h.jsx)(d.Z,{}),(0,h.jsx)(m.Ix,{})]})}},4643:function(e,t,r){r.d(t,{W:function(){return s},Y:function(){return n}});var n=function(){return{type:"clicked"}},s=function(){return{type:"unClicked"}}}}]);
//# sourceMappingURL=881.115e4e5c.chunk.js.map